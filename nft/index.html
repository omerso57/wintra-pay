<!doctype html>
<html lang="tr">
<head>
  <!-- THEME BOOTSTRAP (CSS'ten √∂nce) -->
  <script>
    (function () {
      var s = localStorage.getItem('wintra_theme');
      if (!s) { try { s = matchMedia('(prefers-color-scheme: light)').matches ? 'light':'dark'; } catch(e){ s='dark'; } }
      if (s === 'light') document.documentElement.classList.add('theme-light');
    })();
  </script>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Wintra ‚Äî NFT Store</title>
  <link rel="icon" type="image/webp" href="../assets/wtr_logo.webp" />
  <style>
    /* ============ THEME VARS ============ */
    :root{
      --bg:#000; --text:#eaf5ff; --mut:#9cb2c4;
      --grad:linear-gradient(90deg,#7df8d3,#a98cff,#dce6f0);
      --chip:#1b2a42;
      --btnGhostBg:rgba(255,255,255,.05); --btnGhostBor:rgba(255,255,255,.16);
      --star:rgba(255,255,255,.9);
    }
    .theme-light{
      --bg:#f2f6fb; --text:#0b1220; --mut:#505d6b;
      --btnGhostBg:rgba(0,0,0,.06); --btnGhostBor:rgba(0,0,0,.14);
      --star:rgba(0,0,0,.9);
    }

    /* ============ BASE ============ */
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--text);font:500 15px/1.55 Inter,system-ui,sans-serif}
    .wrap{max-width:1120px;margin:0 auto;padding:18px 22px}
    h1{margin:0 0 4px;font-size:clamp(26px,4.2vw,40px)}
    .mut{color:var(--mut)}
    .topbar{display:flex;gap:12px;align-items:center;justify-content:space-between}
    .btn{border:0;border-radius:14px;padding:10px 14px;font-weight:800;cursor:pointer}
    .btn-ghost{background:var(--btnGhostBg);box-shadow:inset 0 0 0 1px var(--btnGhostBor)}
    .btn-cta{background:var(--grad);color:#000;box-shadow:0 6px 16px rgba(111,240,195,.25)}
    .back{ text-decoration:none; }

    /* arka plan yƒ±ldƒ±z katmanƒ± */
    .stars{position:fixed;inset:0;pointer-events:none;z-index:-1}
    .stars canvas{width:100%;height:100%;display:block;opacity:.45}
    .theme-light .stars canvas{opacity:.25}

    /* ============ GRID/KART ============ */
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:14px;margin:14px 0 28px}
    .card{border-radius:16px;overflow:hidden;background:rgba(255,255,255,.03)}
    .theme-light .card{background:#fff}
    /* gereksiz dƒ±≈ü √ßer√ßeve/kalƒ±n g√∂lge kaldƒ±rƒ±ldƒ± */
    .thumb{aspect-ratio:3/4;background:#0c1a2b;display:grid;place-items:center;position:relative}
    .thumb img{width:100%;height:100%;object-fit:cover;display:block}
    /* rarity √ßer√ßevesi (sadece eser etrafƒ±nda) */
    .thumb.legendary{outline:2px solid #FFD700; box-shadow:0 0 10px #ffd70066}
    .thumb.rare{outline:2px solid #B500FF; box-shadow:0 0 8px #b500ff55}

    .chip{position:absolute;left:10px;top:10px;padding:6px 10px;border-radius:999px;font-size:12px}
    .chip.Legendary{background:linear-gradient(90deg,#ffd700,#fff2a8,#ffd700);color:#000}
    .chip.Rare{background:linear-gradient(90deg,#b500ff,#e37fff);color:#fff}

    .info{padding:10px 12px}
    .ttl{font-weight:900}
    .meta{display:flex;justify-content:space-between;align-items:center;margin-top:6px}
    .price{font-weight:900}
    .left{color:var(--mut);font-size:13px}

    .actions{display:flex;gap:8px;padding:12px}
    .btn-buy{background:var(--grad);color:#001a1a}
    .btn-ghost2{background:var(--btnGhostBg);box-shadow:inset 0 0 0 1px var(--btnGhostBor);color:var(--text)}
  </style>
</head>
<body>
  <div class="stars"><canvas id="space"></canvas></div>

  <div class="wrap">
    <div class="topbar">
      <div>
        <h1>NFT Store <span class="mut" style="font-size:.8em">v1</span></h1>
        <p class="mut">Wintra‚Äônƒ±n ilk koleksiyonu: Data Askeri, G√∂lge ve CyberCity.</p>
        <p class="mut" style="margin-top:6px">Not: DEMO modunda butonlar √∂deme sayfasƒ±na y√∂nlendirir. Ger√ßeƒüe ge√ßtiƒüimizde mint/√∂deme entegrasyonunu baƒülayacaƒüƒ±z.</p>
      </div>
      <div style="display:flex;gap:10px">
        <button id="themeToggle" class="btn btn-ghost">üåì Tema</button>
        <a class="btn btn-cta back" href="../">‚Üê Ana sayfa</a>
      </div>
    </div>

    <section class="grid" id="grid"></section>
  </div>

  <script>
    // Tema Toggle
    (function(){
      const b=document.getElementById('themeToggle');
      function set(light){ document.documentElement.classList.toggle('theme-light', light); localStorage.setItem('wintra_theme', light?'light':'dark'); }
      b?.addEventListener('click', ()=> set(!document.documentElement.classList.contains('theme-light')));
    })();

    // Veri
    const DEMO=true;
    const NFTS=[
      {id:0,name:"Data Askeri",class:"Legendary",priceWTR:10000,supply:20,minted:0,image:"../assets/nft/data-askeri"},
      {id:1,name:"G√∂lge",      class:"Rare",     priceWTR:2000, supply:50,minted:0,image:"../assets/nft/golge"},
      {id:2,name:"CyberCity",  class:"Legendary",priceWTR:25000,supply:10,minted:0,image:"../assets/nft/cybercity"},
    ];
    const EXT=[".webp",".jpg",".jpeg",".png"];

    // Grid render
    const grid=document.getElementById('grid');
    for(const n of NFTS){
      const left=Math.max(n.supply-n.minted,0);
      const frame = n.class.toLowerCase()==='legendary'?'legendary' : n.class.toLowerCase()==='rare'?'rare':'';
      const el=document.createElement('article'); el.className='card';
      el.innerHTML=`
        <div class="thumb ${frame}">
          <img data-base="${n.image}" alt="${n.name}">
          <div class="chip ${n.class}">${n.class}</div>
        </div>
        <div class="info">
          <div class="ttl">${n.name}</div>
          <div class="meta">
            <div class="price">üí† ${n.priceWTR.toLocaleString('tr-TR')} WTR</div>
            <div class="left">Kalan: ${left}/${n.supply}</div>
          </div>
        </div>
        <div class="actions">
          <button class="btn btn-ghost2" data-details="${n.id}">Detay</button>
          <button class="btn btn-buy" data-buy="${n.id}">WTR ile Satƒ±n Al</button>
        </div>`;
      grid.appendChild(el);

      // akƒ±llƒ± g√∂rsel y√ºkleyici
      const img=el.querySelector('img'); let i=0;
      img.onerror=function(){ if(i<EXT.length){ img.src=img.dataset.base+EXT[i++]; } else { img.onerror=null; } };
      img.src=img.dataset.base+EXT[i++];
    }

    grid.addEventListener('click', (e)=>{
      const d=e.target.closest('[data-details]')?.getAttribute('data-details');
      const b=e.target.closest('[data-buy]')?.getAttribute('data-buy');
      if(d!=null){ const n=NFTS.find(x=>String(x.id)===String(d)); alert(`${n.name}\nSƒ±nƒ±f: ${n.class}\nFiyat: ${n.priceWTR} WTR\nAdet: ${n.supply}`); }
      if(b!=null){ const n=NFTS.find(x=>String(x.id)===String(b)); if(DEMO) location.href=`../pay/index.html?nft=${n.id}&qty=1&demo=1`; }
    });

    // Yƒ±ldƒ±z alanƒ± ‚Äî dark'ta daha parlak, light'ta siyah
    (function stars(){
      const c=document.getElementById('space'),x=c.getContext('2d');
      function size(){ c.width=innerWidth; c.height=innerHeight }
      let stars=[];
      function init(){
        const count=Math.round((innerWidth*innerHeight)/9000); // yoƒüunluk
        stars=Array.from({length:count},()=>({x:Math.random()*innerWidth,y:Math.random()*innerHeight,z:0.4+Math.random()*1.2}));
      }
      function draw(){
        x.clearRect(0,0,c.width,c.height);
        const light=document.documentElement.classList.contains('theme-light');
        const color = light ? 'rgba(0,0,0,0.9)' : 'rgba(255,255,255,0.95)'; // dark = daha beyaz
        const glow  = light ? 'rgba(0,0,0,0.55)' : 'rgba(200,230,255,0.9)';
        for(const s of stars){
          x.beginPath(); x.arc(s.x,s.y,1.2+0.8*s.z,0,Math.PI*2);
          x.fillStyle=color; x.shadowBlur=10*s.z; x.shadowColor=glow; x.fill();
          s.x += .10*s.z; if(s.x>innerWidth+2){ s.x=-2; s.y=Math.random()*innerHeight; }
        }
        requestAnimationFrame(draw);
      }
      addEventListener('resize', ()=>{ size(); init(); });
      size(); init(); draw();
    })();
  </script>
</body>
</html>
